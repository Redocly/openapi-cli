"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _commander = _interopRequireDefault(require("commander"));

var _validate = require("./validate");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function cli() {
  _commander.default.arguments('<path>').option('-f, --frame', 'Print no codeframes with errors.').option('-c, --custom-ruleset <path>', 'Path to additional custom ruleset').action(path => {
    process.stdout.write(`Will validate the ${path}\n`);
    const options = {};
    if (_commander.default.frame) options.enableCodeframe = _commander.default.frame;
    if (_commander.default.customRuleset) options.enbaleCustomRuleset = _commander.default.customRuleset;
    const result = (0, _validate.validateFromFile)(path, options);
    process.stdout.write('Following results received:\n');

    if (result.length > 0) {
      process.stdout.write('\n\n');
      result.forEach(entry => process.stdout.write(entry.prettyPrint()));
    } else {
      process.stdout.write('No errors found. Congrats!');
    }
  });

  if (process.argv.length === 2) process.argv.push('-h');

  _commander.default.parse(process.argv);
}

var _default = cli;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jbGkuanMiXSwibmFtZXMiOlsiY2xpIiwicHJvZ3JhbSIsImFyZ3VtZW50cyIsIm9wdGlvbiIsImFjdGlvbiIsInBhdGgiLCJwcm9jZXNzIiwic3Rkb3V0Iiwid3JpdGUiLCJvcHRpb25zIiwiZnJhbWUiLCJlbmFibGVDb2RlZnJhbWUiLCJjdXN0b21SdWxlc2V0IiwiZW5iYWxlQ3VzdG9tUnVsZXNldCIsInJlc3VsdCIsImxlbmd0aCIsImZvckVhY2giLCJlbnRyeSIsInByZXR0eVByaW50IiwiYXJndiIsInB1c2giLCJwYXJzZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUEsU0FBU0EsR0FBVCxHQUFlO0FBQ2JDLHFCQUNHQyxTQURILENBQ2EsUUFEYixFQUVHQyxNQUZILENBRVUsYUFGVixFQUV5QixrQ0FGekIsRUFHR0EsTUFISCxDQUdVLDZCQUhWLEVBR3lDLG1DQUh6QyxFQUlHQyxNQUpILENBSVdDLElBQUQsSUFBVTtBQUNoQkMsSUFBQUEsT0FBTyxDQUFDQyxNQUFSLENBQWVDLEtBQWYsQ0FBc0IscUJBQW9CSCxJQUFLLElBQS9DO0FBQ0EsVUFBTUksT0FBTyxHQUFHLEVBQWhCO0FBRUEsUUFBSVIsbUJBQVFTLEtBQVosRUFBbUJELE9BQU8sQ0FBQ0UsZUFBUixHQUEwQlYsbUJBQVFTLEtBQWxDO0FBQ25CLFFBQUlULG1CQUFRVyxhQUFaLEVBQTJCSCxPQUFPLENBQUNJLG1CQUFSLEdBQThCWixtQkFBUVcsYUFBdEM7QUFFM0IsVUFBTUUsTUFBTSxHQUFHLGdDQUFpQlQsSUFBakIsRUFBdUJJLE9BQXZCLENBQWY7QUFDQUgsSUFBQUEsT0FBTyxDQUFDQyxNQUFSLENBQWVDLEtBQWYsQ0FBcUIsK0JBQXJCOztBQUNBLFFBQUlNLE1BQU0sQ0FBQ0MsTUFBUCxHQUFnQixDQUFwQixFQUF1QjtBQUNyQlQsTUFBQUEsT0FBTyxDQUFDQyxNQUFSLENBQWVDLEtBQWYsQ0FBcUIsTUFBckI7QUFDQU0sTUFBQUEsTUFBTSxDQUFDRSxPQUFQLENBQWdCQyxLQUFELElBQVdYLE9BQU8sQ0FBQ0MsTUFBUixDQUFlQyxLQUFmLENBQXFCUyxLQUFLLENBQUNDLFdBQU4sRUFBckIsQ0FBMUI7QUFDRCxLQUhELE1BR087QUFDTFosTUFBQUEsT0FBTyxDQUFDQyxNQUFSLENBQWVDLEtBQWYsQ0FBcUIsNEJBQXJCO0FBQ0Q7QUFDRixHQW5CSDs7QUFxQkEsTUFBSUYsT0FBTyxDQUFDYSxJQUFSLENBQWFKLE1BQWIsS0FBd0IsQ0FBNUIsRUFBK0JULE9BQU8sQ0FBQ2EsSUFBUixDQUFhQyxJQUFiLENBQWtCLElBQWxCOztBQUUvQm5CLHFCQUFRb0IsS0FBUixDQUFjZixPQUFPLENBQUNhLElBQXRCO0FBQ0Q7O2VBRWNuQixHIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHByb2dyYW0gZnJvbSAnY29tbWFuZGVyJztcbmltcG9ydCB7IHZhbGlkYXRlRnJvbUZpbGUgfSBmcm9tICcuL3ZhbGlkYXRlJztcblxuZnVuY3Rpb24gY2xpKCkge1xuICBwcm9ncmFtXG4gICAgLmFyZ3VtZW50cygnPHBhdGg+JylcbiAgICAub3B0aW9uKCctZiwgLS1mcmFtZScsICdQcmludCBubyBjb2RlZnJhbWVzIHdpdGggZXJyb3JzLicpXG4gICAgLm9wdGlvbignLWMsIC0tY3VzdG9tLXJ1bGVzZXQgPHBhdGg+JywgJ1BhdGggdG8gYWRkaXRpb25hbCBjdXN0b20gcnVsZXNldCcpXG4gICAgLmFjdGlvbigocGF0aCkgPT4ge1xuICAgICAgcHJvY2Vzcy5zdGRvdXQud3JpdGUoYFdpbGwgdmFsaWRhdGUgdGhlICR7cGF0aH1cXG5gKTtcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSB7fTtcblxuICAgICAgaWYgKHByb2dyYW0uZnJhbWUpIG9wdGlvbnMuZW5hYmxlQ29kZWZyYW1lID0gcHJvZ3JhbS5mcmFtZTtcbiAgICAgIGlmIChwcm9ncmFtLmN1c3RvbVJ1bGVzZXQpIG9wdGlvbnMuZW5iYWxlQ3VzdG9tUnVsZXNldCA9IHByb2dyYW0uY3VzdG9tUnVsZXNldDtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVGcm9tRmlsZShwYXRoLCBvcHRpb25zKTtcbiAgICAgIHByb2Nlc3Muc3Rkb3V0LndyaXRlKCdGb2xsb3dpbmcgcmVzdWx0cyByZWNlaXZlZDpcXG4nKTtcbiAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkge1xuICAgICAgICBwcm9jZXNzLnN0ZG91dC53cml0ZSgnXFxuXFxuJyk7XG4gICAgICAgIHJlc3VsdC5mb3JFYWNoKChlbnRyeSkgPT4gcHJvY2Vzcy5zdGRvdXQud3JpdGUoZW50cnkucHJldHR5UHJpbnQoKSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvY2Vzcy5zdGRvdXQud3JpdGUoJ05vIGVycm9ycyBmb3VuZC4gQ29uZ3JhdHMhJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgaWYgKHByb2Nlc3MuYXJndi5sZW5ndGggPT09IDIpIHByb2Nlc3MuYXJndi5wdXNoKCctaCcpO1xuXG4gIHByb2dyYW0ucGFyc2UocHJvY2Vzcy5hcmd2KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xpO1xuIl19